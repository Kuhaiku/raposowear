<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerar Recibo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
       body { 
    font-family: Arial, sans-serif; 
    text-align: center; 
}

.container { 
    width: 148mm; 
    height: 210mm; 
    margin: auto; 
    padding: 20px; 
    border: 2px solid black; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
}
.nota-container .header-text {
    text-align: right;
    font-size: 14px;
}

.nota-container .info-line {
    display: flex;
    justify-content: space-between;
    margin: 10px 0;
}

.nota-container table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

.nota-container th, .nota-container td {
    border: 1px solid black;
    padding: 5px;
    text-align: center;
}

.nota-container input[type="text"],
.nota-container input[type="number"],
.nota-container input[type="date"] {
    width: 100%;
    border: none;
    text-align: center;
}

.nota-container .total-box {
    margin-top: 10px;
    font-weight: bold;
    font-size: 18px;
}


    </style>
</head>
<body>

<div class="container" id="capture">
    <div class="header">
        <div class="logo">Raposo Wear<br>Tel.: (22) 98827-4249</div>
        <div class="header-text">
            <p>Rua Bernardo Vasconcelos 293 - sala 4A - Centro</p>
            <p>Araruama - RJ</p>
        </div>
    </div>
    <div class="info-line">
        <label>Cliente: <input type="text" id="cliente"></label>
        <label>Data: <input type="date" id="data"></label>
    </div>
    <table>
        <tr>
            <th>Quantidade</th><th>Descrição</th><th> Valor Unitário</th><th>Total</th>
        </tr>
        <script>
            for (let i = 0; i < 15; i++) {
                document.write('<tr>' +
                    '<td><input type="number" class="quant" oninput="calcularTotal()"></td>' +
                    '<td><input type="text"></td>' +
                    '<td><input type="number" class="unit" oninput="calcularTotal()"></td>' +
                    '<td><input type="number" class="subtotal" readonly></td>' +
                '</tr>');
            }
        </script>
    </table>
    <div class="total-box">
        Total: R$ <span id="total">0.00</span>
    </div>
</div>

<button onclick="gerarImagem()">Salvar como Imagem</button>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        let hoje = new Date().toISOString().split('T')[0];
        document.getElementById("data").value = hoje;
    });

    function calcularTotal() {
        let total = 0;
        document.querySelectorAll("table tr").forEach(row => {
            let quant = row.querySelector(".quant");
            let unit = row.querySelector(".unit");
            let subtotal = row.querySelector(".subtotal");
            if (quant && unit && subtotal) {
                let subTotalValue = (parseFloat(quant.value) || 0) * (parseFloat(unit.value) || 0);
                subtotal.value = subTotalValue.toFixed(2);
                total += subTotalValue;
            }
        });
        document.getElementById("total").innerText = total.toFixed(2);
    }

    function gerarImagem() {
        html2canvas(document.querySelector("#capture")).then(canvas => {
            let link = document.createElement("a");
            link.href = canvas.toDataURL("image/png");
            link.download = `${document.getElementById('cliente').value || 'recibo'}.png`;
            link.click();
        });
    }
</script>

</body>
</html>

